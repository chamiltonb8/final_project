[
  {
    "objectID": "Tutorial.html",
    "href": "Tutorial.html",
    "title": "Tutorial",
    "section": "",
    "text": "from src import *\n\nrun_cleaning_pipeline()\nrun_analysis_pipeline()"
  },
  {
    "objectID": "Documentation.html",
    "href": "Documentation.html",
    "title": "Documentation",
    "section": "",
    "text": "Here is how you use my package"
  },
  {
    "objectID": "code.html",
    "href": "code.html",
    "title": "My Python Package!",
    "section": "",
    "text": "import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport requests\nimport os\nfrom dotenv import load_dotenv\nimport time\nimport re\n\n\ndef read_data():\n    load_dotenv()\n    API_key = os.getenv('ALPHAVANTAGE_API_KEY')\n\n    symbols = [\"AAPL\", \"MSFT\", \"SPY\", \"TSLA\", \"GOOGL\", \"AMZN\", \"META\"]\n\n    base_url = \"https://www.alphavantage.co/query\"\n\n    all_data = []  # List to store each symbol's data\n\n    for symbol in symbols:\n        print(f\"Downloading weekly data for {symbol}...\")\n\n        params = {\n            \"function\": \"TIME_SERIES_WEEKLY_ADJUSTED\",\n            \"symbol\": symbol,\n            \"apikey\": API_key\n        }\n\n        for attempt in range(3):\n            r = requests.get(base_url, params=params)\n            try:\n                data = r.json()\n                break\n            except ValueError:\n                print(f\"Invalid response for {symbol}, attempt {attempt+1}\")\n                print(\"Raw response:\", r.text[:200])\n                time.sleep(15)\n        else:\n            print(f\"Failed to get valid JSON for {symbol}, skipping...\")\n            continue\n\n        if \"Weekly Adjusted Time Series\" not in data:\n            print(f\"Error for {symbol}: {data}\")\n            time.sleep(15)\n            continue\n\n        df = pd.DataFrame(data[\"Weekly Adjusted Time Series\"]).T\n\n        # Keep default integer index, create new column 'Date'\n        df['Date'] = pd.to_datetime(df.index)\n\n        # Sort by Date if needed\n        df = df.sort_values('Date')\n\n        df = df[df['Date'].between(pd.Timestamp(\"2015-12-04\"), pd.Timestamp(\"2020-12-04\"))]\n\n        df['Symbol'] = symbol\n        df.reset_index(drop=True, inplace=True)  # Drop old string index\n\n        all_data.append(df)\n        time.sleep(15)\n    return df\n\nDownloading weekly data for AAPL...\nDownloading weekly data for MSFT...\nDownloading weekly data for SPY...\nDownloading weekly data for TSLA...\nDownloading weekly data for GOOGL...\nDownloading weekly data for AMZN...\nDownloading weekly data for META...\n\n\n\ndef combine_data():\n    df1 = pd.read_csv(\"weekly_5yr_all_symbols.csv\")\n    df2 = pd.read_csv(\"weekly_5yr_all_symbols_pt_2.csv\")\n\n    # Clean column names (remove leading numbers like \"1. Price\")\n    df1.columns = [re.sub(r'^\\d+\\.\\s*', '', col) for col in df1.columns]\n    df2.columns = [re.sub(r'^\\d+\\.\\s*', '', col) for col in df2.columns]\n\n    # Reorder columns of df1\n    df1 = df1[['Symbol', 'Date'] + [col for col in df1.columns if col not in ['Symbol', 'Date']]]\n\n    # Reorder df2 the same way to guarantee matching column order\n    df2 = df2[df1.columns]\n\n    # Combine the two\n    df = pd.concat([df1, df2], ignore_index=True)\n    df = df.sort_values(['Symbol', 'Date']).reset_index(drop=True)\n\n\ndef cleaning_pipeline(df):\n    df = df.sort_values(['Symbol', 'Date']).reset_index(drop=True)\n\n    # Clean column names (remove numbers like \"1. open\")\n    df.columns = [re.sub(r'^\\d+\\.\\s*', '', col) for col in df.columns]\n\n    # Reorder columns\n    df = df[['Symbol', 'Date'] + [col for col in df.columns if col not in ['Symbol', 'Date']]]\n    df['close'] = df['close'].astype(float)\n\n    # Sort by Symbol and Date to make sure diff works correctly\n    df = df.sort_values(['Symbol', 'Date'])\n\n    # Create a new column with difference from previous close\n    df['Close_diff'] = df.groupby('Symbol')['close'].diff()\n    \n    #Percentage Change from Beginning\n    df['Pct_Change'] = df.groupby('Symbol')['adjusted close'].transform(\n        lambda x: (x / x.iloc[0] - 1) * 100\n    )\n\n\ndef plot_closing_prices(df):\n    df['Date'] = pd.to_datetime(df['Date'])\n    symbols = df['Symbol'].unique()\n\n    for sym in symbols:\n        sub = df[df['Symbol'] == sym]\n\n        plt.figure(figsize=(10,4))\n        plt.plot(sub['Date'], sub['adjusted close'])\n        plt.title(f\"Closing Price Over Time: {sym}\")\n        plt.ylabel(\"Closing Price\")\n        plt.tight_layout()\n        years = sorted(sub['Date'].dt.year.unique())\n        tick_locs = [pd.Timestamp(f'{y}-01-01') for y in years]\n        plt.xticks(ticks=tick_locs, labels=years, rotation=45)\n        plt.show()\n\ndef plot_per_inc(df):\n    df['Pct_Change'] = df.groupby('Symbol')['adjusted close'].transform(\n    lambda x: (x / x.iloc[0] - 1) * 100\n    )\n    df['Date'] = pd.to_datetime(df['Date'])\n    symbols = df['Symbol'].unique()\n\n    for sym in symbols:\n        sub = df[df['Symbol'] == sym]\n\n        plt.figure(figsize=(10,4))\n        plt.plot(sub['Date'], sub['Pct_Change'])\n        plt.title(f\"Closing Price Over Time: {sym}\")\n        plt.ylabel(\"Closing Price\")\n        plt.tight_layout()\n        years = sorted(sub['Date'].dt.year.unique())\n        tick_locs = [pd.Timestamp(f'{y}-01-01') for y in years]\n        plt.xticks(ticks=tick_locs, labels=years, rotation=45)\n        plt.show()\n\n\nplot_per_inc(df)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#We see that amazon, Tesla, and Google split had stocks suddenly decrease hinting they split their stocks\n#Change data at the time of stock splits to account for the change\n\n\n\n\ndef plot_all_stocks_together(df):\n    plt.figure(figsize=(12,6))\n\n    for sym in symbols:\n        sub = df[df['Symbol'] == sym]\n        plt.plot(sub['Date'], sub['Pct_Change'], label=sym)\n\n    plt.title(\"Stock Closing Prices Over Time\")\n    plt.ylabel(\"Closing Price\")\n    plt.legend()\n    plt.tight_layout()\n    plt.show()\nplot_all_stocks_together(df)\n\n\n\n\n\n\n\n\n\n#comparing each stock to the SPY\ndef compare_stocks(stock1, stock2, df):\n    # Pull the data\n    s1 = df[df['Symbol'] == stock1].copy()\n    s2 = df[df['Symbol'] == stock2].copy()\n\n    # Ensure sorted\n    s1 = s1.sort_values(\"Date\")\n    s2 = s2.sort_values(\"Date\")\n\n    # -------------------------------\n    # 1) Closing Price Over Time\n    # -------------------------------\n    plt.figure(figsize=(12,5))\n    plt.plot(s1['Date'], s1['adjusted close'], label=stock1)\n    plt.plot(s2['Date'], s2['adjusted close'], label=stock2)\n\n    plt.title(f\"{stock1} vs {stock2} — Closing Price Over Time\")\n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Closing Price\")\n\n    # Year tick labels only\n    years = sorted(df['Date'].dt.year.unique())\n    ticks = [pd.Timestamp(f\"{y}-01-01\") for y in years]\n    plt.xticks(ticks, years, rotation=45)\n\n    plt.legend()\n    plt.tight_layout()\n    plt.show()\n\n    # -------------------------------\n    # 2) Percentage Change Over Time\n    # -------------------------------\n    plt.figure(figsize=(12,5))\n    plt.plot(s1['Date'], s1['Pct_Change'], label=stock1)\n    plt.plot(s2['Date'], s2['Pct_Change'], label=stock2)\n\n    plt.title(f\"{stock1} vs {stock2} — Percentage Change Over Time\")\n    plt.xlabel(\"Year\")\n    plt.ylabel(\"Percentage Change\")\n\n    # Year tick labels only\n    plt.xticks(ticks, years, rotation=45)\n\n    plt.legend()\n    plt.tight_layout()\n    plt.show()\n\n\n#aggergate across all time and order stocks by which ones have performed best\nperformance = df.groupby('Symbol')['Pct_Change'].last().sort_values(ascending=False)\nprint(\"Stock Performance Over 5 Years:\")\nprint(performance)\n\nStock Performance Over 5 Years:\nSymbol\nGOOGL    253.558777\nMSFT     139.219887\nAAPL     134.294064\nMETA     133.074953\nTSLA     115.429688\nSPY       98.254902\nAMZN      47.487178\nName: Pct_Change, dtype: float64\n\n\n\n# Volatility Analysis\nvolatility = df.groupby('Symbol')['Close_diff'].std().sort_values(ascending=False)\nprint(\"\\nStock Volatility (Standard Deviation of Weekly Close Differences):\")\nprint(volatility)\n\n\nStock Volatility (Standard Deviation of Weekly Close Differences):\nSymbol\nAMZN     162.167585\nGOOGL    143.205635\nTSLA      56.950281\nMETA      20.343873\nMSFT      11.069256\nSPY       10.546683\nAAPL       6.821088\nName: Close_diff, dtype: float64\n\n\n\nmean_close = df.groupby('Symbol')['Close_diff'].mean().sort_values(ascending=False)\nprint(\"\\nMean Daily Weekly Difference:\")\nprint(mean_close)\n\n\nMean Daily Close Difference:\nSymbol\nMETA      1.416346\nSPY       1.205923\nMSFT      1.067885\nAAPL      0.602308\nTSLA     -0.649500\nGOOGL    -5.783000\nAMZN    -11.266769\nName: Close_diff, dtype: float64"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My Python Package!",
    "section": "",
    "text": "Here is a website all about my package.\nDocumentation here\nGet started here"
  }
]